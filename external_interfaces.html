---
layout: default
title: External Interfaces
group: "navigation"
weight: 6
---

<div id="home">
  <h1>External Interfaces</h1>
  
  <h2>Llama / Tasker / Locale</h2>
  
  <p>Apps like the ones mentioned above allow to execute actions based on external events. Those events may well be the connection to a WLAN, the entering of some area. Those events are pretty useful if combined with an FHEM instance. This is why andFHEM provides an external interface to those apps.</p>
  
  <h3>Sending commands</h3>
  
  <p>AndFHEM provides a UI for sending commands to FHEM. Just look for an andFHEM plugin in your favourite location aware switching app.(AndFHEM 2.1.4+)</p>

  <h3>Triggering actions based on device states</h3>

  <p>You can trigger actions based on device states by adding the Device State Locale Plugin. You need to select a device and enter a desired device state. If the device state is found to match the desired state, the condition is met and an action is triggered. This plugin only works using Locale and Tasker.</p>
  
  <h3>Switching connections</h3>

  <p>Using a Locale Plugin you can switch to another AndFHEM connection. This can be used to select a connection based on an available WLAN connection or a network cell. (AndFHEM 2.7.0+)</p>

  <h3> 
  <h2>Programmatic APIs</h2>

  AndFHEM can be partially controlled using intents from external applications:

  <h3>Sending commands</h3>

  <p>Send a command programatically to andFHEM.</p>

  <table>
    <tbody>
    <tr>
      <td>Class Name</td>
      <td>li.klass.fhem.service.intent.SendCommandIntentService</td>
    </tr>
    <tr>
      <td>Action</td>
      <td>li.klass.fhem.constants.Actions.EXECUTE_COMMAND</td>
    </tr>
    <tr>
      <td>Data</td>
      <td>
        Key: COMMAND <br/>
        Value: The command to set (i.e. set abc on)
      </td>
    </tr>
    </tbody>
  </table>

  <h3>Receiving all available device names</h3>

  <p>Receive the device names of all devices available within the current andFHEM connection. (AndFHEM 2.7.0+)</p>

  <table>
    <tbody>
    <tr>
      <td>Class Name</td>
      <td>li.klass.fhem.service.external.ExternalApiService</td>
    </tr>
    <tr>
      <td>Action</td>
      <td>li.klass.fhem.constants.Actions.EXT_DEVICE_NAMES</td>
    </tr>
    <tr>
      <td>Data</td>
      <td>none</td>
    </tr>
    <tr>
      <td>Response Data</td>
      <td>ArrayList&lt;String&gt;, that contains information about device names. Each entry contains three values: device name, alias and widget name. The values are separated using a pipe (|) character. If a value is unset, the value is empty. <br/> Some examples: <br/> mat_halogen|halogenlampe|hal <br/> mat_halogen||</td>
    </tr>
    </tbody>
  </table>


</div>
