---
layout: default
title: Installation
group: "navigation"
weight: 2
---

<div id="installation">
  <h1>Installation</h1>




  <p>When starting andFHEM the first time some dummy data is used for previewing what the application looks like and what devices are supported. To use your own FHEM server, touch your context menu button and click on Preferences. </p>
  
  <div class="toc"></div>
  
  <h2 id="dummyDataPreferenceScreen">Dummy Data Preference Screen</h2>
  (<a class="back-to-top">up</a>)
  
  <p>You can now see a preference screen. It includes the options for the dummy data connection - so basically none. Still, you can click on Data Source to select another type of source to load the FHEM data from. Clicking on the button brings up a popup screen like the following:</p>
  
  <a href="images/installation/datasource-selector.png"><img src="images/installation/datasource-selector.png" /></a>

  <h2 id="telnet">Telnet</h2>
  (<a class="back-to-top">up</a>)
  
  <p>FHEM supports a very basic command line interface to query the current state of devices. Before selecting this option, make sure that you can access the interface from another computer in your local network.</p>

  <p>When using Windows, download Putty and start the program. Select telnet as connection option, enter the address of your FHEM server and add the specified port in your FHEM configuration. The port defaults to 7072. When clicking hitting the button to open the connection, a black window opens up. Hit two times enter to see the FHEM prompt showing up. If this works, andFHEM is also able to connect to FHEM.</p>

  <p>If not, make sure that your fhem.cfg contains a line such as the following: attr global port 7072 global. 7072 is the port used for opening up the command line interface. Global specifies that computers can connect to the server without connecting from the computer running the FHEM server.</p>

  <p>When the above connection is successful you can enter the configuration data in andFHEM in the appropriate fields. The IP field should contain something like 192.168.0.1. It is the address of the computer running the FHEM server. Port is the above mentioned FHEM command line interface port, such as 7072.</p>

  <p>Afterwards click back and refresh the loaded data. You should now see your own devices!</p>

  <a href="images/installation/telnet.png"><img src="images/installation/telnet.png" /></a>
  
  <h2 id="fhemweb">FHEMWEB</h2>
  (<a class="back-to-top">up</a>)
  
  <p>FHEM supports some web interfaces delivered together with the server itself. One of these web interfaces is FHEMWEB, which is configured by adding a line like <span class="code">define fhemweb FHEMWEB 8083 global</span> to your <i>fhem.cfg</i>. Before any data within andFHEM, make sure that you can access the web interface in a browser, either on your smartphone or on another computer. You should see a web page like the following:</p>
  
  <img src="images/installation/fhemweb_view.png" />
  
  <p>The same address you just entered is expected by andFHEM in the URL field within the FHEMWEB preferences. Trailing slashes do not matter. The username and password fields can be filled optionally. They are required if you want to authenticate yourself using basic authentication. If you do not know what this means, stop reading here and leave the fields empty. </p>

  <p>If you want to use the authentication feature you have to make sure that your fhem.cfg contains a line like <span class="code">attr fhemweb basicAuth aj38219cnake</span>. For information how to create the string after basicAuth, continue reading here. Now just enter your username and password in andFHEM.</p>

  <p>Finally, touch your back button and refresh the loaded data. You should now see your own devices!</p>
  
  <a href="images/installation/fhemweb.png"><img src="images/installation/fhemweb.png" /></a>
  
  <h2 id="gcm">Google Cloud Messaging</h2>
  (<a class="back-to-top">up</a>)
  
  <p>Google Cloud Messaging (GCM) enables you to send push notifications to Android handsets. This enables you to send updates in nearly realtime to andFHEM (from 2.4.2 onwards).</p>

  <p>Installation Steps:
    <ul>
      <li>Download and install the <a href="http://svn.code.sf.net/p/fhem/code/trunk/fhem/contrib/98_gcmsend.pm">98_gcmsend.pm</a> module for FHEM (copy the file to the FHEM directory, make sure that your Perl installation meets all the dependencies. FHEM will tell you if it can load the module, especially when issuing <span class="code">reload 99_gcmsend</span>. <br/>
  The module depends on two perl modules, which have to be installed to <i>fhem/lib/perl5/site_perl/5.12.2/</i> (on FritzBoxes, otherwise choose your perl directory)
        <ul>
          <li><span class="code">LWP::Protocol::https</span> (download from <a href="http://search.cpan.org/~gaas/LWP-Protocol-https-6.04/lib/LWP/Protocol/https.pm">here</a>)</li>
          <li><span class="code">Mozilla::CA</span> (download from <a href="http://search.cpan.org/~abh/Mozilla-CA-20130114/lib/Mozilla/CA.pm">here</a>) <br/>
          <a href="images/installation/FritzBoxHttps.png"><img src="images/installation/FritzBoxHttps.png" /></a>
          </li>
        </ul>
      </li>
      
      <li>Create a Google GCM Account.
        <ul>
          <li>Go to <a href="https://code.google.com/apis/console/">https://code.google.com/apis/console/</a> and create a new API project.</li>
          <li>Enable "Google Cloud Messaging for Android" under "Services"</li>
          <li>Under "API Access" hit "Create new browser key", the generated API key is required for configuring GCM afterwards
            <a href="images/installation/google_console.png"><img src="images/installation/google_console.png" /></a>
          </li>
          <li>We have to configure the plug-in to talk to GCM. This is why we have to issue an FHEM command: <br/>
            <span class="code">attr &lt;gcm_device_name&gt; apiKey &lt;apiKey&gt;</span><br />
            whereas <span class="code">&lt;gcm_device_name&gt;</span> is the name of the device you created before and <span class="code">&lt;apikey&gt;</span> is the key you just created within the Google console (number 2 within the image).
          </li>
          <li>
            Link andFHEM
            <ul>
              <li>Enter the andFHEM settings and enter the GCM project number (from the Google console page in section "Overview") within the field "GCM Project Id".</li>
              <li>Refresh your xmllist and look for your GCMSend device you just created. Open the detail page and click the button to register your device. Internally, andFHEM will add your device as regIds attribute of your gcm device.</li>
            </ul>
          </li>
        </ul>
      </li>
    </ul>
    
    <a href="images/installation/gcm.png"><img src="images/installation/gcm.png" /></a>
  
  </p>

</div>
